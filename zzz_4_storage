// Add these methods to InMemoryStorage
func (s *InMemoryStorage) SaveConfig(config *Config) error {
	configData, err := yaml.Marshal(config)
	if err != nil {
		return err
	}
	return s.Set("config", configData, 0) // 0 means no expiration
}

func (s *InMemoryStorage) LoadConfig() (*Config, error) {
	data, err := s.Get("config")
	if err != nil {
		return nil, err
	}
	if data == nil {
		return nil, nil
	}

	var config Config
	if err := yaml.Unmarshal(data, &config); err != nil {
		return nil, err
	}
	return &config, nil
}

func (s *InMemoryStorage) SaveBasicAuth(users map[string]string) error {
	userData, err := json.Marshal(users)
	if err != nil {
		return err
	}
	return s.Set("basic_auth", userData, 0)
}

func (s *InMemoryStorage) LoadBasicAuth() (map[string]string, error) {
	data, err := s.Get("basic_auth")
	if err != nil {
		return nil, err
	}
	if data == nil {
		return nil, nil
	}

	var users map[string]string
	if err := json.Unmarshal(data, &users); err != nil {
		return nil, err
	}
	return users, nil
}